#!/bin/sh

ytchan="$(wl-paste -n | cut -d@ -f2)"
ytfile="$HOME/.config/ytfzf/subscriptions"

if rg -q "# $ytchan" "$ytfile"; then
  notify-send "â›” $ytchan" "Â¡Ya estÃ¡s suscrito a este canal!"
else
  echo "# $ytchan" >> "$ytfile" && notify-send "ğŸ‘ï¸ SuscribiÃ©ndote a:" "$ytchan"
fi

sleep 1

ytlink="$(wl-paste -n)"
ytsub="$(ytfzf --channel-link="$ytlink")"

if rg -q "^$ytsub$" "$ytfile"; then
  notify-send "â›” $ytsub" "Â¡Ya estÃ¡s suscrito a este canal!"
else
  echo "$ytsub" >> "$ytfile" && notify-send "ğŸŒ Te has suscrito al canal" "$ytchan $ytsub"
fi
